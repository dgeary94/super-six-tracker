(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&m(h)}).observe(document,{childList:!0,subtree:!0});function l(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function m(o){if(o.ep)return;o.ep=!0;const a=l(o);fetch(o.href,a)}})();const A="/super-six-tracker/assets/super-six-scores.0a855ddd.csv",I="/super-six-tracker/assets/football.b99eb6b5.svg";document.querySelector("#app").innerHTML=`
  <div id="title">
    <img id="football" src="" alt="Logo" width="60" height="60"/>
    <h1>Super 6 League Tracker</h1>
  </div>
  <h2>QUE SERA SERA, WE'RE GOING TO WORMBELLY</h2>
  <div id="seasons">
    <label for="season">Season:</label>
    <select name="season" id="season-select">
      <option value="23-24" selected>2023/2024</option>
      <option value="22-23">2022/2023</option>
    </select>
  </div>
  <p>Click each name to toggle data series.</p>
  <div id="graph"><div>`;document.getElementById("football").src=I;const u={top:40,right:80,bottom:40,left:80},p=800-u.left-u.right,S=500-u.top-u.bottom,H=p/S;let c=null,y=null;function N(r,n){const l=window.innerWidth,m=window.innerHeight;return l/m>H?(n=S,r=p):(r=l+u.left,n=r/H),[r,n]}[c,y]=N();const O=`<table id="stats-table" width=${c*1.2}>
<thead>
    <tr id="name-header">
      <th></th>
    </tr>
</thead>
<tbody>
    <tr id="max-round-score"></tr>
    <tr id="avg-round-score"></tr>
    <tr id="standard-dev"></tr>
    <tr id="rounds-won"></tr>
</tbody>
</table>`,E=document.getElementById("season-select");E.addEventListener("change",R);R();function R(){document.getElementById("graph").innerHTML="";const r=E.value,n=d3.select("#graph").append("svg").attr("width",c+u.left+u.right).attr("height",y+u.top+u.bottom).append("g").attr("transform",`translate(${u.left}, ${u.top})`);d3.csv(A).then(function(l){const m=["andy","david","jake","james","jonnie","josh","sam"],o=["andy","david","ed","jack","jake","james","jonnie","josh","sam"];let a=null;r==="22-23"?a=m.map(function(t){return{name:t,values:l.filter(function(s){return s.name===t}).map(function(s){return{round:+s.round,score:+s.score,score_sum:+s.score_sum}})}}):a=o.map(function(t){return{name:t,values:l.filter(function(s){return s.s2_name===t}).map(function(s){return{round:+s.s2_round,score:+s.s2_score,score_sum:+s.s2_score_sum}})}});function h(){return d3.axisBottom(x).ticks()}function v(){return d3.axisLeft(g).ticks()}const x=d3.scaleLinear().domain(r==="22-23"?[d3.min(l,function(t){return+t.round}),d3.max(l,function(t){return+t.round})]:[1,d3.max(l,function(t){return+t.s2_round})]).range([0,c]);n.append("g").attr("transform",`translate(0, ${y})`).style("font-size","0.75rem").call(d3.axisBottom(x).ticks(r==="22-23"?d3.max(l,function(t){return+t.round})/2:d3.max(l,function(t){return+t.s2_round*2})/2)),n.append("g").attr("class","grid").attr("transform","translate(0,"+y+")").call(h().tickSize(-y).tickFormat("").ticks(d3.max(l,function(t){return r==="22-23"?+t.round:+t.s2_round*2})/2)),n.append("text").attr("text-anchor","center").attr("x",(c-50)/2).attr("y",y+u.bottom).text("Round");const g=d3.scaleLinear().domain([d3.min(l,function(t){return r==="22-23"?+t.score_sum:+t.s2_score_sum}),Math.ceil(d3.max(l,function(t){return r==="22-23"?+t.score_sum:+t.s2_score_sum})/10)*10]).range([y,0]);n.append("g").style("font-size","0.75rem").call(d3.axisLeft(g).ticks(r==="22-23"?c===p?d3.max(l,function(t){return+t.score_sum})/20:d3.max(l,function(t){return+t.score_sum})/40:10)),n.append("g").attr("class","grid").call(v().tickSize(-c).tickFormat("").ticks(r==="22-23"?c===p?d3.max(l,function(t){return+t.score_sum})/20:d3.max(l,function(t){return+t.score_sum})/10:10)),n.append("text").attr("text-anchor","center").attr("transform",c===p?"rotate(0)":"rotate(-90)").attr("x",c===p?-u.left:-y/2).attr("y",c===p?y/2:-u.top).text("Points");const e=d3.scaleOrdinal().domain(r==="22-23"?m:o).range(d3.schemeTableau10),i=d3.line().x(t=>x(+t.round)).y(t=>g(+t.score_sum)),f=n.selectAll("myLines").data(a).join("path").attr("d",t=>i(t.values)).attr("stroke",t=>e(t.name)).style("stroke-width",2).style("fill","none"),w=n.selectAll("myDots").data(r==="22-23"?m:o).enter().append("circle").attr("cx",function(t,s){return r==="22-23"?c===p?0+s*100:0+s*70:c===p?-20+s*80:-30+s*60}).attr("cy",-20).attr("r",5).style("fill",t=>e(t)),j=n.selectAll("myLabels").data(r==="22-23"?m:o).enter().append("text").attr("x",function(t,s){return r==="22-23"?c===p?7+s*100:7+s*70:c===p?-13+s*80:-23+s*60}).attr("y",-15).attr("class","legend-label").style("fill",t=>e(t)).text(function(t){return t}).attr("text-anchor","left").style("alignment-baseline","middle").on("click",(t,s)=>{const L=j.selectAll("g")._parents;let b=null;for(let d=0;d<L.length;d++)if(s===L[d].innerHTML){b=L[d];break}const T=f.selectAll("path")._parents;let _=null;for(let d=0;d<T.length;d++)if(e(s)===T[d].attributes.stroke.value){_=T[d];break}const k=w.selectAll("g")._parents;let M=null;for(let d=0;d<k.length;d++){let B=window.getComputedStyle(k[d]);if(`${d3.color(e(s)).formatRgb()}`===B.getPropertyValue("fill")){M=k[d];break}}d3.select(b).style("opacity",()=>d3.select(b).style("opacity")==="1"?"0.33":"1"),d3.select(_).style("opacity",()=>d3.select(_).style("opacity")==="1"?"0":"1"),d3.select(M).style("opacity",()=>window.getComputedStyle(M).getPropertyValue("opacity")==="1"?"0.33":"1")});$(a)})}function $(r){document.getElementById("stats-table")===null&&d3.select("#app").append("div").html(O);const n=[];for(let e=0;e<r.length;e++){let i=[];for(let f=0;f<r[e].values.length;f++)i.push(r[e].values[f].score);n.push(i)}const l=[];for(let e=0;e<n[0].length;e++){let i=0;for(let f=0;f<n.length;f++)n[f][e]>i&&(i=n[f][e]);l.push(i)}let m=new Array(n.length).fill(0);for(let e=0;e<l.length;e++)for(let i=0;i<n.length;i++)n[i][e]===l[e]&&(m[i]+=1);const o=document.getElementById("name-header"),a=document.getElementById("max-round-score"),h=document.getElementById("avg-round-score"),v=document.getElementById("standard-dev"),x=document.getElementById("rounds-won");let g=[];for(let e=0;e<r.length;e++)g.push(r[e].name);for(let e=0;e<g.length;e++){let i=g[e],f=i.charAt(0).toUpperCase()+i.slice(1);g[e]=f}o.innerHTML="",a.innerHTML="",h.innerHTML="",v.innerHTML="",x.innerHTML="",o.innerHTML="<th></th>";for(let e=0;e<g.length;e++)o.innerHTML+=`<th>${g[e]}</th>`;a.innerHTML="<td>Best Round</td>";for(let e=0;e<n.length;e++)a.innerHTML+=`<td>${d3.max(n[e])}</td>`;h.innerHTML="<td>Average Round</td>";for(let e=0;e<n.length;e++)h.innerHTML+=`<td>${Math.round(d3.mean(n[e])*10)/10}</td>`;v.innerHTML="<td>Standard Deviation</td>";for(let e=0;e<n.length;e++)v.innerHTML+=`<td>${Math.round(d3.deviation(n[e])*10)/10}</td>`;x.innerHTML="<td>Rounds Won</td>";for(let e=0;e<n.length;e++)x.innerHTML+=`<td>${m[e]}</td>`}
