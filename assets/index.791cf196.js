(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))p(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&p(m)}).observe(document,{childList:!0,subtree:!0});function s(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function p(l){if(l.ep)return;l.ep=!0;const i=s(l);fetch(l.href,i)}})();const N="/super-six-tracker/assets/super-six-scores.79b2dc4a.csv",O="/super-six-tracker/assets/football.b99eb6b5.svg";document.querySelector("#app").innerHTML=`
  <div id="title">
    <img id="football" src="" alt="Logo" width="60" height="60"/>
    <h1>Super 6 League Tracker</h1>
  </div>
  <h2>QUE SERA SERA, WE'RE GOING TO WORMBELLY</h2>
  <div id="seasons">
    <label for="season">Season:</label>
    <select name="season" id="season-select">
      <option value="24-25" selected>2024/2025</option>
      <option value="23-24">2023/2024</option>
      <option value="22-23">2022/2023</option>
    </select>
  </div>
  <p>Click each name to toggle data series.</p>
  <div id="graph"><div>`;document.getElementById("football").src=O;const d={top:40,right:80,bottom:40,left:80},f=800-d.left-d.right,j=500-d.top-d.bottom,S=f/j;let c=null,y=null;function $(o,r){const s=window.innerWidth,p=window.innerHeight;return s/p>S?(r=j,o=f):(o=s+d.left,r=o/S),[o,r]}[c,y]=$();const W=`<table id="stats-table" width=${c*1.2}>
<thead>
    <tr id="name-header">
      <th></th>
    </tr>
</thead>
<tbody>
    <tr id="max-round-score"></tr>
    <tr id="avg-round-score"></tr>
    <tr id="standard-dev"></tr>
    <tr id="rounds-won"></tr>
</tbody>
</table>`,w=document.getElementById("season-select");w.addEventListener("change",E);E();function E(){document.getElementById("graph").innerHTML="";const o=w.value,r=d3.select("#graph").append("svg").attr("width",c+d.left+d.right).attr("height",y+d.top+d.bottom).append("g").attr("transform",`translate(${d.left}, ${d.top})`);d3.csv(N).then(function(s){const p=["andy","david","jake","james","jonnie","josh","sam"],l=["andy","david","ed","jack","jake","james","jonnie","josh","sam"],i=["andy","david","ed","jack","jake","james","jonnie","josh","sam","tom"];let m=null;switch(o){case"22-23":m=p.map(function(e){return{name:e,values:s.filter(function(n){return n.name===e}).map(function(n){return{round:+n.round,score:+n.score,score_sum:+n.score_sum}})}});break;case"23-24":m=l.map(function(e){return{name:e,values:s.filter(function(n){return n.s2_name===e}).map(function(n){return{round:+n.s2_round,score:+n.s2_score,score_sum:+n.s2_score_sum}})}});break;case"24-25":m=i.map(function(e){return{name:e,values:s.filter(function(n){return n.s3_name===e}).map(function(n){return{round:+n.s3_round,score:+n.s3_score,score_sum:+n.s3_score_sum}})}});break;default:console.log("No recognised season toggle!")}function x(){return d3.axisBottom(h).ticks()}function v(){return d3.axisLeft(t).ticks()}const h=d3.scaleLinear().domain(o==="22-23"?[1,d3.max(s,function(e){return+e.round})]:o==="23-24"?[1,d3.max(s,function(e){return+e.s2_round})]:[1,d3.max(s,function(e){return+e.s3_round})]).range([0,c]);r.append("g").attr("transform",`translate(0, ${y})`).style("font-size","0.75rem").call(d3.axisBottom(h).ticks(o==="22-23"?d3.max(s,function(e){return+e.round})/2:o==="23-24"?d3.max(s,function(e){return+e.s2_round})/2:d3.max(s,function(e){return+e.s3_round}))),r.append("g").attr("class","grid").attr("transform","translate(0,"+y+")").call(x().tickSize(-y).tickFormat("").ticks(d3.max(s,function(e){return o==="22-23"?+e.round:+e.s2_round})/2)),r.append("text").attr("text-anchor","center").attr("x",(c-50)/2).attr("y",y+d.bottom).text("Round");const t=d3.scaleLinear().domain([d3.min(s,function(e){return o==="22-23"?+e.score_sum:o==="23-24"?+e.s2_score_sum:+e.s3_score_sum}),Math.ceil(d3.max(s,function(e){return o==="22-23"?+e.score_sum:o==="23-24"?+e.s2_score_sum:+e.s3_score_sum})/10)*10]).range([y,0]);r.append("g").style("font-size","0.75rem").call(d3.axisLeft(t).ticks(c===f?d3.max(s,function(e){return+e.score_sum})/40:d3.max(s,function(e){return+e.score_sum})/40)),r.append("g").attr("class","grid").call(v().tickSize(-c).tickFormat("").ticks(c===f?d3.max(s,function(e){return+e.score_sum})/10:d3.max(s,function(e){return+e.score_sum})/10)),r.append("text").attr("text-anchor","center").attr("transform",c===f?"rotate(0)":"rotate(-90)").attr("x",c===f?-d.left:-y/2).attr("y",c===f?y/2:-d.top).text("Points");const a=d3.scaleOrdinal().domain(o==="22-23"?p:l).range(d3.schemeTableau10),g=d3.line().x(e=>h(+e.round)).y(e=>t(+e.score_sum)),R=r.selectAll("myLines").data(m).join("path").attr("d",e=>g(e.values)).attr("stroke",e=>a(e.name)).style("stroke-width",2).style("fill","none");r.append("g").attr("id","legend-container").attr("width",c+d.left+d.right);const H=d3.select("#legend-container"),B=H.selectAll("myDots").data(o==="22-23"?p:o==="23-24"?l:i).enter().append("circle").attr("cx",function(e,n){return o==="22-23"?c===f?0+n*100:0+n*70:o==="23-24"?c===f?-20+n*80:-30+n*60:c===f?-23+n*70:-60+n*60}).attr("cy",-20).attr("r",5).attr("class","legend-dots").style("fill",e=>a(e)),A=H.selectAll("myLabels").data(o==="22-23"?p:o==="23-24"?l:i).enter().append("text").attr("x",function(e,n){return o==="22-23"?c===f?7+n*100:7+n*70:o==="23-24"?c===f?-13+n*80:-23+n*60:c===f?-15+n*70:-53+n*60}).attr("y",-15).attr("class","legend-label").style("fill",e=>a(e)).text(function(e){return e}).attr("text-anchor","left").style("alignment-baseline","middle").on("click",(e,n)=>{const b=A.selectAll("g")._parents;let _=null;for(let u=0;u<b.length;u++)if(n===b[u].innerHTML){_=b[u];break}const L=R.selectAll("path")._parents;let k=null;for(let u=0;u<L.length;u++)if(a(n)===L[u].attributes.stroke.value){k=L[u];break}const T=B.selectAll("g")._parents;let M=null;for(let u=0;u<T.length;u++){let I=window.getComputedStyle(T[u]);if(`${d3.color(a(n)).formatRgb()}`===I.getPropertyValue("fill")){M=T[u];break}}d3.select(_).style("opacity",()=>d3.select(_).style("opacity")==="1"?"0.33":"1"),d3.select(k).style("opacity",()=>d3.select(k).style("opacity")==="1"?"0":"1"),d3.select(M).style("opacity",()=>window.getComputedStyle(M).getPropertyValue("opacity")==="1"?"0.33":"1")});C(m)})}function C(o){document.getElementById("stats-table")===null&&(console.log("Table does not exist yet!"),d3.select("#app").append("div").html(W),d3.select("#app").append("p").html("* Includes tied winners."));const r=[];for(let t=0;t<o.length;t++){let a=[];for(let g=0;g<o[t].values.length;g++)a.push(o[t].values[g].score);r.push(a)}const s=[];for(let t=0;t<r[0].length;t++){let a=0;for(let g=0;g<r.length;g++)r[g][t]>a&&(a=r[g][t]);s.push(a)}let p=new Array(r.length).fill(0);for(let t=0;t<s.length;t++)for(let a=0;a<r.length;a++)r[a][t]===s[t]&&(p[a]+=1);const l=document.getElementById("name-header"),i=document.getElementById("max-round-score"),m=document.getElementById("avg-round-score"),x=document.getElementById("standard-dev"),v=document.getElementById("rounds-won");let h=[];for(let t=0;t<o.length;t++)h.push(o[t].name);for(let t=0;t<h.length;t++){let a=h[t],g=a.charAt(0).toUpperCase()+a.slice(1);h[t]=g}l.innerHTML="",i.innerHTML="",m.innerHTML="",x.innerHTML="",v.innerHTML="",l.innerHTML="<th></th>";for(let t=0;t<h.length;t++)l.innerHTML+=`<th>${h[t]}</th>`;i.innerHTML="<td>Best Round</td>";for(let t=0;t<r.length;t++)i.innerHTML+=`<td>${d3.max(r[t])}</td>`;m.innerHTML="<td>Avg Round</td>";for(let t=0;t<r.length;t++)m.innerHTML+=`<td>${Math.round(d3.mean(r[t])*10)/10}</td>`;x.innerHTML="<td>Std Dev</td>";for(let t=0;t<r.length;t++)x.innerHTML+=`<td>${Math.round(d3.deviation(r[t])*10)/10}</td>`;v.innerHTML="<td>Rounds Won<sup>*</sup></td>";for(let t=0;t<r.length;t++)v.innerHTML+=`<td>${p[t]}</td>`}
