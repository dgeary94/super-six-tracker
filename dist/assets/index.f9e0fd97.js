(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function f(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=f(s);fetch(s.href,l)}})();const w="/super-six-tracker/assets/super-six-scores.0c993c0c.csv",B="/super-six-tracker/assets/football.b99eb6b5.svg";document.querySelector("#app").innerHTML=`
  <div id="title">
    <img id="football" src="" alt="Logo" width="60" height="60"/>
    <h1>Super 6 League Tracker</h1>
  </div>
  <h2>QUE SERA SERA, WE'RE GOING TO WORMBELLY</h2>
  <div id="seasons">
    <label for="season">Season:</label>
    <select name="season" id="season-select">
      <option value="24-25" selected>2024/2025</option>
      <option value="23-24">2023/2024</option>
      <option value="22-23">2022/2023</option>
    </select>
  </div>
  <p>Click each name to toggle data series.</p>
  <div id="legend-container"></div>
  <div id="graph"><div>`;document.getElementById("football").src=B;const d={top:20,right:80,bottom:40,left:80},x=800-d.left-d.right,j=500-d.top-d.bottom,H=x/j;let u=null,y=null;function I(r,n){const f=window.innerWidth,o=window.innerHeight;return f/o>H?(n=j,r=x):(r=f+d.left,n=r/H),[r,n]}[u,y]=I();const $=`<table id="stats-table" width=${u*1.2}>
<thead>
    <tr id="name-header">
      <th></th>
    </tr>
</thead>
<tbody>
    <tr id="max-round-score"></tr>
    <tr id="avg-round-score"></tr>
    <tr id="standard-dev"></tr>
    <tr id="rounds-won"></tr>
</tbody>
</table>`,E=document.getElementById("season-select");E.addEventListener("change",S);S();function S(){document.getElementById("legend-container").innerHTML="",document.getElementById("graph").innerHTML="";const r=E.value,n=d3.select("#graph").append("svg").attr("width",`${u+d.left+d.right}px`).attr("height",`${y+d.top+d.bottom}px`).append("g").attr("transform",`translate(${d.left}, ${d.top})`),f=d3.select("#legend-container").style("width",`${u}px`);d3.csv(w).then(function(o){const s=["andy","david","jake","james","jonnie","josh","sam"],l=["andy","david","ed","jack","jake","james","jonnie","josh","sam"],p=["andy","david","ed","jack","jake","james","jonnie","josh","sam","tom"];let g=null;switch(r){case"22-23":g=s.map(function(t){return{name:t,values:o.filter(function(i){return i.name===t}).map(function(i){return{round:+i.round,score:+i.score,score_sum:+i.score_sum}})}});break;case"23-24":g=l.map(function(t){return{name:t,values:o.filter(function(i){return i.s2_name===t}).map(function(i){return{round:+i.s2_round,score:+i.s2_score,score_sum:+i.s2_score_sum}})}});break;case"24-25":g=p.map(function(t){return{name:t,values:o.filter(function(i){return i.s3_name===t}).map(function(i){return{round:+i.s3_round,score:+i.s3_score,score_sum:+i.s3_score_sum}})}});break;default:console.log("No recognised season toggle!")}function v(){return d3.axisBottom(m).ticks()}function L(){return d3.axisLeft(b).ticks()}const m=d3.scaleLinear().domain(r==="22-23"?[1,d3.max(o,function(t){return+t.round})]:r==="23-24"?[1,d3.max(o,function(t){return+t.s2_round})]:[1,d3.max(o,function(t){return+t.s3_round})]).range([0,u]);n.append("g").attr("transform",`translate(0, ${y})`).style("font-size","0.75rem").call(d3.axisBottom(m).ticks(r==="22-23"?d3.max(o,function(t){return+t.round})/2:r==="23-24"?d3.max(o,function(t){return+t.s2_round})/2:d3.max(o,function(t){return+t.s3_round})/2)),n.append("g").attr("class","grid").attr("transform","translate(0,"+y+")").call(v().tickSize(-y).tickFormat("").ticks(d3.max(o,function(t){return r==="22-23"?+t.round:+t.s2_round})/2)),n.append("text").attr("text-anchor","center").attr("x",(u-50)/2).attr("y",y+d.bottom).text("Round");const b=d3.scaleLinear().domain([d3.min(o,function(t){return r==="22-23"?+t.score_sum:r==="23-24"?+t.s2_score_sum:+t.s3_score_sum}),Math.ceil(d3.max(o,function(t){return r==="22-23"?+t.score_sum:r==="23-24"?+t.s2_score_sum:+t.s3_score_sum})/10)*10]).range([y,0]);n.append("g").style("font-size","0.75rem").call(d3.axisLeft(b).ticks(u===x?d3.max(o,function(t){return+t.score_sum})/40:d3.max(o,function(t){return+t.score_sum})/40)),n.append("g").attr("class","grid").call(L().tickSize(-u).tickFormat("").ticks(u===x?d3.max(o,function(t){return+t.score_sum})/10:d3.max(o,function(t){return+t.score_sum})/10)),n.append("text").attr("text-anchor","center").attr("transform",u===x?"rotate(0)":"rotate(-90)").attr("x",u===x?-d.left:-y/2).attr("y",u===x?y/2:-d.top*2).text("Points");const e=d3.scaleOrdinal().domain(r==="22-23"?s:l).range(d3.schemeTableau10),a=d3.line().x(t=>m(+t.round)).y(t=>b(+t.score_sum)),c=n.selectAll("myLines").data(g).join("path").attr("d",t=>a(t.values)).attr("stroke",t=>e(t.name)).style("stroke-width",2).style("fill","none"),R=f.selectAll("myLabels").data(r==="22-23"?s:r==="23-24"?l:p).enter().append("div").attr("class","legend-label").style("color",t=>e(t)).text(function(t){return t}).style("alignment-baseline","middle").on("click",(t,i)=>{const _=R.selectAll("g")._parents;let T=null;for(let h=0;h<_.length;h++)if(i===_[h].innerHTML){T=_[h];break}const k=c.selectAll("path")._parents;let M=null;for(let h=0;h<k.length;h++)if(e(i)===k[h].attributes.stroke.value){M=k[h];break}d3.select(T).style("opacity",()=>d3.select(T).style("opacity")==="1"?"0.33":"1"),d3.select(M).style("opacity",()=>d3.select(M).style("opacity")==="1"?"0":"1")});N(g)})}function N(r){document.getElementById("stats-table")===null&&(console.log("Table does not exist yet!"),d3.select("#app").append("div").html($),d3.select("#app").append("p").html("* Includes tied winners."));const n=[];for(let e=0;e<r.length;e++){let a=[];for(let c=0;c<r[e].values.length;c++)a.push(r[e].values[c].score);n.push(a)}const f=[];for(let e=0;e<n.length;e++){let a=0;for(let c=0;c<n[e].length;c++)a+=n[e][c];f.push(a)}const o=[];for(let e=0;e<n[0].length;e++){let a=0;for(let c=0;c<n.length;c++)n[c][e]>a&&(a=n[c][e]);o.push(a)}let s=new Array(n.length).fill(0);for(let e=0;e<o.length;e++)for(let a=0;a<n.length;a++)n[a][e]===o[e]&&(s[a]+=1);const l=document.getElementById("name-header"),p=document.getElementById("max-round-score"),g=document.getElementById("avg-round-score"),v=document.getElementById("standard-dev"),L=document.getElementById("rounds-won");let m=[];for(let e=0;e<r.length;e++)m.push(r[e].name);for(let e=0;e<m.length;e++){let a=m[e],c=a.charAt(0).toUpperCase()+a.slice(1);m[e]=c}const b=f.indexOf(d3.max(f));l.innerHTML="",p.innerHTML="",g.innerHTML="",v.innerHTML="",L.innerHTML="",l.innerHTML="<th></th>";for(let e=0;e<m.length;e++)e===b?l.innerHTML+=`<th>${m[e]}&#129351;</th>`:l.innerHTML+=`<th>${m[e]}</th>`;p.innerHTML="<td>Best Round</td>";for(let e=0;e<n.length;e++)p.innerHTML+=`<td>${d3.max(n[e])}</td>`;g.innerHTML="<td>Avg Round</td>";for(let e=0;e<n.length;e++)g.innerHTML+=`<td>${Math.round(d3.mean(n[e])*10)/10}</td>`;v.innerHTML="<td>Std Dev</td>";for(let e=0;e<n.length;e++)v.innerHTML+=`<td>${Math.round(d3.deviation(n[e])*10)/10}</td>`;L.innerHTML="<td>Rounds Won<sup>*</sup></td>";for(let e=0;e<n.length;e++)L.innerHTML+=`<td>${s[e]}</td>`}
