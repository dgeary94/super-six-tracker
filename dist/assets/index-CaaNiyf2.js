(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function h(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=h(o);fetch(o.href,r)}})();const w="/super-six-tracker/assets/super-six-scores-BzLFXrKK.csv",I="/super-six-tracker/assets/football-BH6fJzOH.svg";document.querySelector("#app").innerHTML=`
  <div id="title">
    <img id="football" src="" alt="Logo" width="60" height="60"/>
    <h1>Super 6 League Tracker</h1>
  </div>
  <h2>QUE SERA SERA, WE'RE GOING TO WORMBELLY</h2>
  <div id="seasons">
    <label for="season">Season:</label>
    <select name="season" id="season-select">
      <option value="25-26" selected>2025/2026</option>
      <option value="24-25">2024/2025</option>
      <option value="23-24">2023/2024</option>
      <option value="22-23">2022/2023</option>
    </select>
  </div>
  <p>Click each name to toggle data series.</p>
  <div id="legend-container"></div>
  <div id="graph"><div>`;document.getElementById("football").src=I;const a={top:20,right:80,bottom:40,left:80},x=800-a.left-a.right,S=500-a.top-a.bottom,E=x/S;let u=null,g=null;function $(n,l){const h=window.innerWidth,s=window.innerHeight;return h/s>E?(l=S,n=x):(n=h+a.left,l=n/E),[n,l]}[u,g]=$();let O=`<table id="stats-table" width=${u*1.2}>
<thead>
    <tr id="name-header">
      <th></th>
    </tr>
</thead>
<tbody id="stats-rows">
    <tr id="max-round-score"></tr>
    <tr id="avg-round-score"></tr>
    <tr id="standard-dev"></tr>
    <tr id="rounds-won"></tr>
</tbody>
</table>`;const B=document.getElementById("season-select");B.addEventListener("change",R);R();function R(){document.getElementById("legend-container").innerHTML="",document.getElementById("graph").innerHTML="";const n=B.value;console.log(`Current season: ${n}`);const l=d3.select("#graph").append("svg").attr("width",`${u+a.left+a.right}px`).attr("height",`${g+a.top+a.bottom}px`).append("g").attr("transform",`translate(${a.left}, ${a.top})`),h=d3.select("#legend-container").style("width",`${u}px`);d3.csv(w).then(function(s){const o=["andy","david","jake","james","jonnie","josh","sam"],r=["andy","david","ed","jack","jake","james","jonnie","josh","sam"],d=["andy","david","ed","jack","jake","james","jonnie","josh","sam"],L=["andy","david","ed","jack","jake","james","jonnie","josh","sam","chatbog"];let f=null;switch(n){case"22-23":f=o.map(function(t){return{name:t,values:s.filter(function(e){return e.name===t}).map(function(e){return{round:+e.round,score:+e.score,score_sum:+e.score_sum}})}});break;case"23-24":f=r.map(function(t){return{name:t,values:s.filter(function(e){return e.s2_name===t}).map(function(e){return{round:+e.s2_round,score:+e.s2_score,score_sum:+e.s2_score_sum}})}});break;case"24-25":f=d.map(function(t){return{name:t,values:s.filter(function(e){return e.s3_name===t}).map(function(e){return{round:+e.s3_round,score:+e.s3_score,score_sum:+e.s3_score_sum,correct_results:+e.s3_correct_results,correct_scores:+e.s3_correct_scores}})}});break;case"25-26":f=L.map(function(t){return{name:t,values:s.filter(function(e){return e.s4_name===t}).map(function(e){return{round:+e.s4_round,score:+e.s4_score,score_sum:+e.s4_score_sum,correct_results:+e.s4_correct_results,correct_scores:+e.s4_correct_scores}})}});break;default:console.log("No recognised season toggle!")}function T(){return d3.axisBottom(_).ticks()}function b(){return d3.axisLeft(y).ticks()}const _=d3.scaleLinear().domain(n==="22-23"?[1,d3.max(s,function(t){return+t.round})]:n==="23-24"?[1,d3.max(s,function(t){return+t.s2_round})]:n==="24-25"?[1,d3.max(s,function(t){return+t.s3_round})]:[1,d3.max(s,function(t){return+t.s4_round})]).range([0,u]);l.append("g").attr("transform",`translate(0, ${g})`).style("font-size","0.75rem").call(d3.axisBottom(_).ticks(n==="22-23"?d3.max(s,function(t){return+t.round})/2:n==="23-24"?d3.max(s,function(t){return+t.s2_round})/2:n==="24-25"?d3.max(s,function(t){return+t.s3_round})/2:d3.max(s,function(t){return+t.s4_round})/2)),l.append("g").attr("class","grid").attr("transform","translate(0,"+g+")").call(T().tickSize(-g).tickFormat("").ticks(d3.max(s,function(t){return n==="22-23"?+t.round:+t.s2_round})/2)),l.append("text").attr("text-anchor","center").attr("x",(u-50)/2).attr("y",g+a.bottom).text("Round");const y=d3.scaleLinear().domain([d3.min(s,function(t){return n==="22-23"?+t.score_sum:n==="23-24"?+t.s2_score_sum:+t.s3_score_sum}),Math.ceil(d3.max(s,function(t){return n==="22-23"?+t.score_sum:n==="23-24"?+t.s2_score_sum:+t.s3_score_sum})/10)*10]).range([g,0]);l.append("g").style("font-size","0.75rem").call(d3.axisLeft(y).ticks(u===x?d3.max(s,function(t){return+t.score_sum})/40:d3.max(s,function(t){return+t.score_sum})/40)),l.append("g").attr("class","grid").call(b().tickSize(-u).tickFormat("").ticks(u===x?d3.max(s,function(t){return+t.score_sum})/10:d3.max(s,function(t){return+t.score_sum})/10)),l.append("text").attr("text-anchor","center").attr("transform",u===x?"rotate(0)":"rotate(-90)").attr("x",u===x?-80:-g/2).attr("y",u===x?g/2:-40).text("Points");const v=d3.scaleOrdinal().domain(n==="22-23"?o:r).range(d3.schemeTableau10),H=d3.line().x(t=>_(+t.round)).y(t=>y(+t.score_sum)),M=l.selectAll("myLines").data(f).join("path").attr("d",t=>H(t.values)).attr("stroke",t=>v(t.name)).style("stroke-width",2).style("fill","none"),m=h.selectAll("myLabels").data(n==="22-23"?o:n==="23-24"?r:n==="24-25"?d:L).enter().append("div").attr("class","legend-label").style("color",t=>v(t)).text(function(t){return t}).style("alignment-baseline","middle").on("click",(t,e)=>{const c=m.selectAll("g")._parents;let i=null;for(let p=0;p<c.length;p++)if(e===c[p].innerHTML){i=c[p];break}const k=M.selectAll("path")._parents;let j=null;for(let p=0;p<k.length;p++)if(v(e)===k[p].attributes.stroke.value){j=k[p];break}d3.select(i).style("opacity",()=>d3.select(i).style("opacity")==="1"?"0.33":"1"),d3.select(j).style("opacity",()=>d3.select(j).style("opacity")==="1"?"0":"1")});N(f,n,O)})}function N(n,l,h){if(console.log("Updating the table."),document.getElementById("stats-table")===null&&(console.log("Table does not exist yet!"),d3.select("#app").append("div").html(h),d3.select("#app").append("p").html("* Includes tied winners.")),l==="24-25"||l==="25-26"){let e=document.getElementById("stats-rows");e.innerHTML+=`
    <tr id="correct-results"></tr>
    <tr id="correct-scores"></tr>`}const s=[],o=[];for(let e=0;e<n.length;e++)n[e].values.length<=1?(s.push(n[e].values.correct_results),o.push(n[e].values.correct_scores)):(s.push(n[e].values.slice(-1)[0].correct_results),o.push(n[e].values.slice(-1)[0].correct_scores));const r=[];for(let e=0;e<n.length;e++){let c=[];for(let i=0;i<n[e].values.length;i++)c.push(n[e].values[i].score);r.push(c)}const d=[];for(let e=0;e<r.length;e++){let c=0;for(let i=0;i<r[e].length;i++)c+=r[e][i];d.push(c)}const L=[];for(let e=0;e<r[0].length;e++){let c=0;for(let i=0;i<r.length;i++)r[i][e]>c&&(c=r[i][e]);L.push(c)}let f=new Array(r.length).fill(0);for(let e=0;e<L.length;e++)for(let c=0;c<r.length;c++)r[c][e]===L[e]&&(f[c]+=1);const T=document.getElementById("name-header"),b=document.getElementById("max-round-score"),_=document.getElementById("avg-round-score"),y=document.getElementById("standard-dev"),v=document.getElementById("rounds-won"),H=document.getElementById("correct-results"),M=document.getElementById("correct-scores");let m=[];for(let e=0;e<n.length;e++)n[e].name==="chatbog"?m.push("&#129484;"):m.push(n[e].name);for(let e=0;e<m.length;e++){let c=m[e];if(c==="&#129484;")continue;let i=c.charAt(0).toUpperCase()+c.slice(1);m[e]=i}const t=d.indexOf(d3.max(d));T.innerHTML="",b.innerHTML="",_.innerHTML="",y.innerHTML="",v.innerHTML="",H.innerHTML="",M.innerHTML="",T.innerHTML="<th></th>";for(let e=0;e<m.length;e++)e===t?T.innerHTML+=`<th>${m[e]}&#129351;</th>`:T.innerHTML+=`<th>${m[e]}</th>`;b.innerHTML="<td>Best Round</td>";for(let e=0;e<r.length;e++)b.innerHTML+=`<td>${d3.max(r[e])}</td>`;_.innerHTML="<td>Avg Round</td>";for(let e=0;e<r.length;e++)_.innerHTML+=`<td>${Math.round(d3.mean(r[e])*10)/10}</td>`;y.innerHTML="<td>Std Dev</td>";for(let e=0;e<r.length;e++)y.innerHTML+=`<td>${Math.round(d3.deviation(r[e])*10)/10}</td>`;v.innerHTML="<td>Rounds Won<sup>*</sup></td>";for(let e=0;e<r.length;e++)v.innerHTML+=`<td>${f[e]}</td>`;if(l==="24-25"){H.innerHTML="<td>Correct Results</td>";for(let e=0;e<s.length;e++)H.innerHTML+=`<td>${s[e]}</td>`;M.innerHTML="<td>Correct Scores</td>";for(let e=0;e<o.length;e++)M.innerHTML+=`<td>${o[e]}</td>`}}
