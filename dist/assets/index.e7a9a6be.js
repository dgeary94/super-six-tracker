(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function l(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(o){if(o.ep)return;o.ep=!0;const a=l(o);fetch(o.href,a)}})();const A="/super-six-tracker/assets/super-six-scores.46c0c04c.csv",I="/super-six-tracker/assets/football.b99eb6b5.svg";document.querySelector("#app").innerHTML=`
  <div id="title">
    <img id="football" src="" alt="Logo" width="60" height="60"/>
    <h1>Super 6 League Tracker</h1>
  </div>
  <h2>QUE SERA SERA, WE'RE GOING TO WORMBELLY</h2>
  <div id="seasons">
    <label for="season">Season:</label>
    <select name="season" id="season-select">
      <option value="23-24" selected>2023/2024</option>
      <option value="22-23">2022/2023</option>
    </select>
  </div>
  <p>Click each name to toggle data series.</p>
  <div id="graph"><div>`;document.getElementById("football").src=I;const d={top:40,right:80,bottom:40,left:80},f=800-d.left-d.right,M=500-d.top-d.bottom,T=f/M;let i=null,h=null;function N(n,r){const l=window.innerWidth,u=window.innerHeight;return l/u>T?(r=M,n=f):(n=l+d.left,r=n/T),[n,r]}[i,h]=N();const O=`<table id="stats-table" width=${i*1.2}>
<thead>
    <tr id="name-header">
      <th></th>
    </tr>
</thead>
<tbody>
    <tr id="max-round-score"></tr>
    <tr id="avg-round-score"></tr>
    <tr id="standard-dev"></tr>
</tbody>
</table>`,H=document.getElementById("season-select");H.addEventListener("change",S);S();function S(){document.getElementById("graph").innerHTML="";const n=H.value,r=d3.select("#graph").append("svg").attr("width",i+d.left+d.right).attr("height",h+d.top+d.bottom).append("g").attr("transform",`translate(${d.left}, ${d.top})`);d3.csv(A).then(function(l){const u=["andy","david","jake","james","jonnie","josh","sam"],o=["andy","david","ed","jack","jake","james","jonnie","josh","sam"];let a=null;n==="22-23"?(console.log("We have data for that!"),a=u.map(function(e){return{name:e,values:l.filter(function(s){return s.name===e}).map(function(s){return{round:+s.round,score:+s.score,score_sum:+s.score_sum}})}})):a=o.map(function(e){return{name:e,values:l.filter(function(s){return s.s2_name===e}).map(function(s){return{round:+s.s2_round,score:+s.s2_score,score_sum:+s.s2_score_sum}})}}),console.log(a);function m(){return d3.axisBottom(p).ticks()}function t(){return d3.axisLeft(g).ticks()}const p=d3.scaleLinear().domain(n==="22-23"?[d3.min(l,function(e){return+e.round}),d3.max(l,function(e){return+e.round})]:[1,d3.max(l,function(e){return+e.s2_round})]).range([0,i]);r.append("g").attr("transform",`translate(0, ${h})`).style("font-size","0.75rem").call(d3.axisBottom(p).ticks(n==="22-23"?d3.max(l,function(e){return+e.round})/2:d3.max(l,function(e){return+e.s2_round})/2)),r.append("g").attr("class","grid").attr("transform","translate(0,"+h+")").call(m().tickSize(-h).tickFormat("").ticks(d3.max(l,function(e){return n==="22-23"?+e.round:+e.s2_round})/2)),r.append("text").attr("text-anchor","center").attr("x",(i-50)/2).attr("y",h+d.bottom).text("Round");const g=d3.scaleLinear().domain([d3.min(l,function(e){return n==="22-23"?+e.score_sum:+e.s2_score_sum}),Math.ceil(d3.max(l,function(e){return n==="22-23"?+e.score_sum:+e.s2_score_sum})/10)*10]).range([h,0]);r.append("g").style("font-size","0.75rem").call(d3.axisLeft(g).ticks(n==="22-23"?i===f?d3.max(l,function(e){return+e.score_sum})/20:d3.max(l,function(e){return+e.score_sum})/40:10)),r.append("g").attr("class","grid").call(t().tickSize(-i).tickFormat("").ticks(n==="22-23"?i===f?d3.max(l,function(e){return+e.score_sum})/20:d3.max(l,function(e){return+e.score_sum})/10:10)),r.append("text").attr("text-anchor","center").attr("transform",i===f?"rotate(0)":"rotate(-90)").attr("x",i===f?-d.left:-h/2).attr("y",i===f?h/2:-d.top).text("Points");const y=d3.scaleOrdinal().domain(n==="22-23"?u:o).range(d3.schemeTableau10),E=d3.line().x(e=>p(+e.round)).y(e=>g(+e.score_sum)),R=r.selectAll("myLines").data(a).join("path").attr("d",e=>E(e.values)).attr("stroke",e=>y(e.name)).style("stroke-width",2).style("fill","none"),w=r.selectAll("myDots").data(n==="22-23"?u:o).enter().append("circle").attr("cx",function(e,s){return n==="22-23"?i===f?0+s*100:0+s*70:i===f?-20+s*80:-30+s*60}).attr("cy",-20).attr("r",5).style("fill",e=>y(e)),B=r.selectAll("myLabels").data(n==="22-23"?u:o).enter().append("text").attr("x",function(e,s){return n==="22-23"?i===f?7+s*100:7+s*70:i===f?-13+s*80:-23+s*60}).attr("y",-15).attr("class","legend-label").style("fill",e=>y(e)).text(function(e){return e}).attr("text-anchor","left").style("alignment-baseline","middle").on("click",(e,s)=>{const x=B.selectAll("g")._parents;let v=null;for(let c=0;c<x.length;c++)if(s===x[c].innerHTML){v=x[c];break}const b=R.selectAll("path")._parents;let L=null;for(let c=0;c<b.length;c++)if(y(s)===b[c].attributes.stroke.value){L=b[c];break}const _=w.selectAll("g")._parents;let k=null;for(let c=0;c<_.length;c++){let j=window.getComputedStyle(_[c]);if(`${d3.color(y(s)).formatRgb()}`===j.getPropertyValue("fill")){k=_[c];break}}d3.select(v).style("opacity",()=>d3.select(v).style("opacity")==="1"?"0.33":"1"),d3.select(L).style("opacity",()=>d3.select(L).style("opacity")==="1"?"0":"1"),d3.select(k).style("opacity",()=>window.getComputedStyle(k).getPropertyValue("opacity")==="1"?"0.33":"1")});$(a)})}function $(n){console.log("Update the table."),document.getElementById("stats-table")===null&&(console.log("Table does not exist yet!"),d3.select("#app").append("div").html(O));const r=[];for(let t=0;t<n.length;t++){let p=[];for(let g=0;g<n[t].values.length;g++)p.push(n[t].values[g].score);r.push(p)}const l=document.getElementById("name-header"),u=document.getElementById("max-round-score"),o=document.getElementById("avg-round-score"),a=document.getElementById("standard-dev");let m=[];for(let t=0;t<n.length;t++)m.push(n[t].name);for(let t=0;t<m.length;t++){let p=m[t],g=p.charAt(0).toUpperCase()+p.slice(1);m[t]=g}l.innerHTML="",u.innerHTML="",o.innerHTML="",a.innerHTML="",l.innerHTML="<th></th>";for(let t=0;t<m.length;t++)l.innerHTML+=`<th>${m[t]}</th>`;u.innerHTML="<td>Best Round</td>";for(let t=0;t<r.length;t++)u.innerHTML+=`<td>${d3.max(r[t])}</td>`;o.innerHTML="<td>Average Round</td>";for(let t=0;t<r.length;t++)o.innerHTML+=`<td>${Math.round(d3.mean(r[t])*10)/10}</td>`;a.innerHTML="<td>Standard Deviation</td>";for(let t=0;t<r.length;t++)a.innerHTML+=`<td>${Math.round(d3.deviation(r[t])*10)/10}</td>`}
